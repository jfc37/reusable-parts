<jfc-alert *ngIf="(errorMessage$ | async) as error" type="error">{{ error }}</jfc-alert>
<form name="searchForm" (submit)="search()" novalidate>
  <mat-form-field>
    <input matInput placeholder="Director / Shareholder" [formControl]="searchFormControl" autocomplete="off" />
  </mat-form-field>

  <button
    mat-raised-button
    color="primary"
    class="submit-button"
    type="submit"
    aria-label="Search"
    [disabled]="searchFormControl.invalid || (isSearching$ | async)"
  >
    Search
  </button>
</form>

<div *ngIf="(results$ | async) as results">
  <table *ngIf="results.length; else: noResults">
    <tr>
      <th></th>
      <th>Name</th>
      <th>Company</th>
      <th>Address</th>
    </tr>
    <tr *ngFor="let result of results">
      <td><button (click)="selected(result)" mat-raised-button>Select</button></td>
      <td>{{ [result.firstName, result.middleName, result.lastName].join(' ') }}</td>
      <td>{{ result.associatedCompanyName }}</td>
      <td>{{ result.physicalAddress.addressLines.join(', ') }}</td>
    </tr>
  </table>

  <ng-template #noResults> No results found </ng-template>
</div>
